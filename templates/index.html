{% extends 'base.html' %} {% block content %}
<div id="callout-text">
  <section class="img-wrapper callout-container row">
    <div class="col-10 col-md-8">
      {% if not session['logged_in']%}
      <p class="text-oswald white callout-main-text">
        Tired of having a long list of bookmarks and no Idea of what you
        bookmarked, when you bookmarked it and why? The answer to all your
        problems is here organize your bookmarks with our bookmarks organiser
        app. Please register and then login In to use the app.
      </p>
      {% endif %} {% if session['logged_in']%}
      <p class="text-oswald white callout-main-text">
        You are now logged In an free to add, delete update and create your
        bookmarks please look at our examples below and the head to the
        bookmarks section to begin creating your own unique bookmarks orginser.
      </p>
      {% endif %}
      <div class="row justify-content-center">
        {% if not session['logged_in']%}
        <button type="button" class="data-btn col-md-3  btn-primary">
          <a href="{{url_for('register')}}" class="text-oswald white">
            Register here</a
          >
        </button>
        {% endif %} {% if session['logged_in']%}
        <button type="button" class="data-btn col-md-3  btn-primary">
          <a href="{{url_for('users')}}" class="text-oswald white">
            Bookmarks</a
          >
        </button>
        {% endif %}
      </div>
    </div>
  </section>
</div>
{% if session['logged_in']%}
<section class="bookmark-page">
  <div class="row justify-content-center mt-4">
    <div class="col-lg-4">
      <h2 class="bookmarks-header text-oswald mt-5 text-center uppercase">
        Latest Bookmarks
        <hr class="hr-color" />
      </h2>
    </div>
  </div>

  <!-- search bar section -->
  <div class="row  mt-2">
    <div class="col text-center">
      <form action="{{ url_for('search_bar') }}" method="POST">
        <div class="row justify-content-center">
          <input
            class="col-8"
            type="text"
            id="search_bar"
            name="search_bar"
            placeholder="Search"
          />
          <button class="btn-primary text-barlow col-1" type="submit">
            Go
          </button>
        </div>
      </form>
    </div>
  </div>
  <!-- end search bar section -->
  <!-- bookmarks section -->
  <div class="row">
    {%for cat in categories%} {% for book in bookmarks %}
    <div class="col-lg-6">
      <div class="card">
        <div class="card-body text-center">
          {% if cat.category_name == book.category_name %} {%endif%}
          <h2 class="card-title text-oswald uppercase">
            {{book.category_name| truncate(30, killwords=True) }}
          </h2>
          <hr class="hr-color" />
          <p class="card-text text-barlow">
            <a href="{{book.add_bookmark_url}}" target="_blank"
              >{{book.add_bookmark_url| truncate(30, killwords=True) }}</a
            >
          </p>
          <p class="card-text">
            {{book.bookmark_description |truncate (50, killwords=True) }}
          </p>
          {%if book.name== users.name%}
          <p class="card-text text-barlow">
            Added by
            <mark class="text-dark">{{book.username}}</mark>
            on {{book.last_modified}}
          </p>
          {%endif%}
          <a
            href="{{url_for('delete_bookmark', book_id=book._id)}}"
            class="btn btn-primary"
            >Delete</a
          >
          <a
            href="{{url_for('edit_bookmark', book_id=book._id)}}"
            class="btn btn-primary"
            >Edit</a
          >
        </div>
      </div>
    </div>
    {%endfor%}{%endfor%}
  </div>
</section>
<!-- pagination taken an altered from a tutorial found in slack archives and at  
   https://github.com/MiroslavSvec/DCD_lead/tree/pagination -->
<!-- pagination section -->
{% if args.num_results > args.p_limit %}
<div class="container">
  <div class="row justify-content-around">
    <!-- 
			If this is first page (offset == 0) 
			prev_url link should not be displayed 
    -->
    <div class="col-4">
      {% if args.p_offset > 0 %}
      <a href="{{args.prev_url}}"><i class="fas fa-angle-left fa-4x"></i></a>
      {% endif %}
    </div>

    <!-- 
			If this is last page (offset + limit == lenght of the documents) 
			prev_url link should not be displayed 
		-->
    {% if args.p_offset + args.p_limit < args.num_results %}
    <a href="{{args.next_url}}" class="text-barlow">
      <i class="fas fa-angle-right fa-4x "></i
    ></a>
    {% endif %}
  </div>
</div>
{% endif %} {%endif%} {% endblock content %}
